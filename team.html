<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TOMODACHI — Team</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    /* 페이지 페이드 */
    :root { --fade-bg:#ffffff; --fade-duration:.8s }
    body{ opacity:0; background:var(--fade-bg); transition:opacity var(--fade-duration) ease, background-color var(--fade-duration) ease }
    body.fade-in{ opacity:1 } body.fade-out{ opacity:0 }

    /* 팀 섹션 */
    .team-container{
      position: relative;
      display: flex;
      justify-content: center;
      align-items: flex-end;
      gap: clamp(4vw, 8vw, 10vw);
      width: 100%;
      min-height: 60vh;
      margin-top: 32vh;
      z-index: 2;
    }
    .member{ max-width: 420px; display:flex; flex-direction:column; align-items:center; text-align:center; cursor:pointer }
    .member img{
      width:100%; height:auto; max-height: 48vh; object-fit:contain;
      filter: drop-shadow(0 10px 40px rgba(0,0,0,.12));
      transition: transform .4s ease, opacity .4s ease;
    }
    .member img:hover{ transform:scale(1.06); opacity:.95 }
    .member figcaption{ margin-top:10px; font-weight:700 }
    .member .meta{ font-size:.9rem; color: var(--muted) }

    /* 배경 레이어 우선순위 */
    .bg-grid-canvas{ z-index: 0; }
    .pagehost{ position:relative; z-index: 2; }

    /* === 사이드 패널 === */
    .panel-scrim{
      position: fixed; inset: 0;
      background: rgba(0,0,0,.28);
      opacity: 0; pointer-events: none;
      transition: opacity .25s ease;
      z-index: 49;
    }
    .panel-scrim.show{ opacity: 1; pointer-events: auto; }

    .team-panel{
      position: fixed; top: var(--appbar-h); right: 0; bottom: 0;
      width: min(420px, 92vw);
      background: #fff; color: #111;
      box-shadow: -18px 0 40px rgba(0,0,0,.18);
      transform: translateX(100%);
      transition: transform .35s cubic-bezier(.2,.8,.2,1);
      z-index: 50;
      display: grid; grid-template-rows: auto 1fr;
      border-left: 1px solid #ececec;
    }
    .team-panel.open{ transform: translateX(0); }
    .team-panel .panel-head{
      display: flex; align-items: center; justify-content: space-between;
      padding: 14px 16px; border-bottom: 1px solid #efefef;
    }
    .team-panel .panel-title{ margin: 0; font-size: 1.15rem; font-weight: 800; }
    .team-panel .panel-close{
      border: 1px solid #ddd; background: #fff; border-radius: 10px;
      padding: 6px 10px; cursor: pointer;
    }
    .team-panel .panel-body{ padding: 16px; overflow: auto; }
    .team-panel .panel-sub{ margin: 6px 0 10px; color: #6b7280; font-weight: 600; }
    .team-panel .panel-text{ line-height: 1.55; }
    .team-panel .badge{
      display:inline-block; padding:4px 8px; border:1px solid #e6e6e6;
      border-radius:999px; font-size:.8rem; margin-right:6px;
    }
  </style>
</head>
<script src="script.js"></script>
<body class="team">
  <header class="appbar">
    <div class="brand"><a href="index.html">TOMODACHI</a></div>
    <nav class="steps" aria-label="Page steps">
      <a class="step-dot" href="index.html" aria-label="Home"></a>
      <a class="step-dot" href="howto.html" aria-label="How To"></a>
      <a class="step-dot active" href="team.html" aria-label="Team"></a>
      <a class="step-dot" href="info.html" aria-label="Site"></a>
      <a class="step-dot" href="anim.html" aria-label="Data"></a>
      <a class="step-dot" href="grid.html" aria-label="Grid"></a>
    </nav>
  </header>

  <!-- 공통 배경 그리드 + 팀 페이지 아웃라인 -->
  <div class="bg-grid-canvas" aria-hidden="true"></div>
  <div class="data-frame" aria-hidden="true"></div>

  <!-- 사이드 패널 -->
  <div class="panel-scrim" id="panelScrim" hidden></div>
  <aside class="team-panel" id="teamPanel" aria-hidden="true">
    <div class="panel-head">
      <h3 class="panel-title" id="panelTitle">Member</h3>
      <button class="panel-close" id="panelClose">✕</button>
    </div>
    <div class="panel-body" id="panelBody"></div>
  </aside>

  <main class="pagehost">
    <h2 class="pagetitle">Our Team</h2>
    <section class="team-container">
      <figure class="member" data-id="gyuho">
        <img src="assets/team/C1.png" alt="Character C1" />
        <figcaption>Gyuho</figcaption>
        <div class="meta">Seoul → Providence</div>
      </figure>

      <figure class="member" data-id="sheryl">
        <img src="assets/team/C2.png" alt="Character C2" />
        <figcaption>Sheryl</figcaption>
        <div class="meta">Taipei → Providence</div>
      </figure>

      <figure class="member" data-id="candice">
        <img src="assets/team/C3.png" alt="Character C3" />
        <figcaption>Candice</figcaption>
        <div class="meta">California → Providence</div>
      </figure>
    </section>
  </main>

  <footer class="bottom-nav">
    <a class="arrow prev" href="howto.html" aria-label="Previous page">←</a>
    <a class="arrow next" href="info.html" aria-label="Next page">→</a>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      document.body.classList.add('fade-in');

      // 내부 링크 페이드아웃
      document.querySelectorAll('a[href]').forEach(a=>{
        const url=a.getAttribute('href');
        if(!url||url.startsWith('http')||url.startsWith('#')) return;
        a.addEventListener('click', e=>{
          e.preventDefault();
          document.body.classList.remove('fade-in');
          document.body.classList.add('fade-out');
          setTimeout(()=>location.href=url,600);
        });
      });
    });

    // === 사이드 패널 JS ===
    const TEAM = {
      gyuho: {
        name: "Gyuho",
        sub: "Seoul → Providence",
        html: `
          <p class="panel-text">급하면.</p>
          <p class="panel-text">어제 출발했어야지.</p>
          <div><span class="badge">Korea</span><span class="badge">Timing</span></div>`
      },
      sheryl: {
        name: "Sheryl",
        sub: "Taipei → Providence",
        html: `
          <p class="panel-text">過馬路要小心點....</p>
          <p class="panel-text">(be careful when crossing…)</p>
          <div><span class="badge">Taiwan</span><span class="badge">Careful</span></div>`
      },
      candice: {
        name: "Candice",
        sub: "California → Providence",
        html: `
          <p class="panel-text">In LA, where cars dominate and roads are wide, jaywalking feels dangerous and walking is uncommon.
But in Providence, walking for 30 minutes feels natural, and people move freely through the streets.</p>
          <p class="panel-text">Always look both ways before you cross!</p>
          <div><span class="badge">LA</span><span class="badge">Shock</span></div>`
      }
    };

    const panel = document.getElementById('teamPanel');
    const scrim = document.getElementById('panelScrim');
    const closeBtn = document.getElementById('panelClose');
    const title = document.getElementById('panelTitle');
    const body = document.getElementById('panelBody');

    document.querySelectorAll('.member').forEach(el=>{
      el.addEventListener('click', ()=>{
        const id = el.dataset.id;
        const data = TEAM[id];
        title.textContent = data.name;
        body.innerHTML = `<div class="panel-sub">${data.sub}</div>${data.html}`;
        panel.classList.add('open');
        scrim.hidden = false;
        scrim.classList.add('show');
      });
    });

    const closePanel = ()=>{
      panel.classList.remove('open');
      scrim.classList.remove('show');
      setTimeout(()=>{ scrim.hidden = true; }, 200);
    };
    closeBtn.addEventListener('click', closePanel);
    scrim.addEventListener('click', closePanel);
  </script>
</body>
</html>